---
- name: Include Prerequisites Tasks to check before upgrade
  include_tasks: prerequisites.yml
  args:
    apply:
      tags: prerequisites
  tags: prerequisites

- name: Update OS | Include variables
  ansible.builtin.include_tasks: variables.yml
  args:
    apply:
      tags: linux-os-upgrade
  tags: linux-os-upgrade

- name: "Update OS | Include tasks for the corresponding release major version"
  include_tasks: "os-update-and-upgrade-rhel{{ ansible_distribution_major_version }}.yml"
  args:
    apply:
      tags:
        - os-update-and-upgrade-rhel
        - os-update-and-upgrade-rhel7
      become: yes
  tags:
    - os-update-and-upgrade-rhel
    - os-update-and-upgrade-rhel7
...
